<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>It's Lit</title>
    <!-- Lato Font -->
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'>

    <!-- Stylesheet -->
    <link href="css/mat-css/gallery-materialize.css" rel="stylesheet">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>

    <!-- Navbar and Header -->
    <nav class="nav-extended">
        <div class="nav-background">
            <div class="pattern active" style="background-image: url('images/books.jpg');"></div>
        </div>
        <div class="nav-wrapper container">
            <a href="index.html" class="brand-logo"><i class="material-icons">camera</i>It's Lit</a>
            <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">

                <li><a class='dropdown-button' href='#' data-activates='feature-dropdown' data-belowOrigin="true" data-constrainWidth="false">User Account<i class="material-icons right">arrow_drop_down</i></a></li>
            </ul>
            <!-- Dropdown Structure -->
            <ul id='feature-dropdown' class='dropdown-content'>
                <li><a href="horizontal.html">Settings</a></li>
                <li><a href="full-header.html">See Favorites</a></li>
                <li><a href="horizontal.html">Books You Own</a></li>

            </ul>

            <div class="nav-header center">
                <h1>All Books:</h1>
                <a id="click" class="waves-effect waves-light btn">button</a>
            </div>
        </div>

        <!-- Fixed Masonry Filters -->
        <div class="categories-wrapper lighten-1" style="background: #ba3030">
            <div class="categories-container">
                <ul class="categories container">
                    <li class="active"><a href="#all">All</a></li>
                    <li><a href="#polygon">Horror</a></li>
                    <li><a href="#bigbang">Mystery</a></li>
                    <li><a href="#sacred">Young Adult</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <ul class="side-nav" id="nav-mobile">
        <li class="active"><a href="index.html"><i class="material-icons">flare</i>Gallery</a></li>
        <li><a href="index-dark.html"><i class="material-icons">brightness_3</i>Dark Theme</a></li>
        <li><a href="blog.html"><i class="material-icons">edit</i>Blog</a></li>
        <li><a href="docs.html"><i class="material-icons">school</i>Docs</a></li>
        <li><a href="full-header.html"><i class="material-icons">fullscreen</i>Fullscreen Header</a></li>
        <li><a href="horizontal.html"><i class="material-icons">swap_horiz</i>Horizontal Style</a></li>
        <li><a href="no-image.html"><i class="material-icons">texture</i>No Image Expand</a></li>
    </ul>



    <!-- Gallery -->
    <div class="start-gallery">

    </div>
    <!-- /.container -->


    <!-- Core Javascript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="js/mat-js/imagesloaded.pkgd.min.js"></script>
    <script src="js/mat-js/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/materialize/0.98.0/js/materialize.min.js"></script>
    <script src="js/mat-js/color-thief.min.js"></script>
    <script src="js/mat-js/galleryExpand.js"></script>
    <script src="js/mat-js/init.js"></script>



    <script type="text/javascript">
        $(document).ready(function() {

            var queryURL = "https://www.googleapis.com/books/v1/volumes?q=" + "it" + "+" + "inauthor:" + "stephen-king" + "&" + "AIzaSyCPuyAmcaGASa9ymUw16xO4oRTaSde7fv0"
            $.ajax({
                url: queryURL,
                method: "GET"

            }).done(function(response) {

                var startGal = $('.start-gallery'); //EVERYTHING 
                var pID = $('<div id="portfolio" class="section gray">');
                var container = $('<div class="container">');
                var row = $(' <div class="gallery row">');

                pID.appendTo(startGal); // pid is in the gallery id, container is in pid, row is in container
                container.appendTo(pID);
                row.appendTo(container);

                $("#click").on("click", function(event) {
                    for (var k = 0; k < 20; k++) {

                        var answer = response.items;
                        var bookTitle = answer[k].volumeInfo.title;
                        var bookAuthors = answer[k].volumeInfo.authors;
                        var bookYear = answer[k].volumeInfo.publishedDate;
                        var bookCategories = answer[k].volumeInfo.categories;
                        var bookCover = answer[k].volumeInfo.imageLinks.thumbnail;

                        if (bookCover) {
                            console.log("inside if");
                            console.log("answer is: " + bookTitle + " categories: " + bookCategories + " || " +
                                "pic:  " + bookCover);
                            console.log(response.items);

                            var column = $('<div class="col m6 s12 gallery-item gallery-horizontal gallery-expand">'); //gallery-filter GENRE FROM DB
                            var curveWrap = $(' <div class="gallery-curve-wrapper">');
                            var aWrap = $('<a class="gallery-cover gray" style="height: 250px; width: 170px;">');
                            var imgTag = $('<img src="' + bookCover + '" alt="placeholder" style="height: 250px;">');
                            var galleryHeader = $('<div class="gallery-header" style="height: 250px;">');
                            galleryHeader.html('<h5>' + bookTitle + '</h5>' + '<p>Author(s): ' + bookAuthors +
                                '<br> Categorie(s): ' + bookCategories + '<br>Published: ' + bookYear + '</p>');
                            var galleryBody = $('<div class="gallery-body">');
                            var wrapTitle = $('<div class="title-wrapper">');


                            column.appendTo(row);
                            curveWrap.appendTo(column);
                            aWrap.appendTo(curveWrap);
                            imgTag.appendTo(aWrap);

                            curveWrap.prepend(galleryHeader);
                            galleryHeader.appendTo(curveWrap);
                            galleryBody.appendTo(galleryHeader);
                            wrapTitle.appendTo(galleryHeader);
                            // past here, the above variables will have all the classes contained within them

                            console.log("=========================");
                        } else {
                            console.log("book with no cover: " + answer[k].volumeInfo.title + "n/-------------")
                            console.log("no cover found");
                        }
                    }
                    // google.books.setOnLoadCallback(initialize);
                })
            })
        })
    </script>
</body>

</html>
